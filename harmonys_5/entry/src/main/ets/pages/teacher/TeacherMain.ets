import { Course, Student, Assignment, QuestionBank, Analytics } from './interfaces/TeacherInterfaces';
import { CourseManagement } from './components/CourseManagement';
import { StudentManagement } from './components/StudentManagement';
import { AssignmentManagement } from './components/AssignmentManagement';
import { QuestionBankManagement } from './components/QuestionBankManagement';
import { AnalyticsOverview } from './components/AnalyticsOverview';
// import { AIAssistant } from './components/AIAssistant'; // AIåŠŸèƒ½å·²ç§»é™¤
import router from '@ohos.router';

@Component
export struct TeacherMain {
  @State currentTab: number = 0;
  @State courses: Course[] = [];
  @State students: Student[] = [];
  @State assignments: Assignment[] = [];
  @State questionBank: QuestionBank[] = [];
  @State analytics: Analytics = {
    totalStudents: 0,
    activeCourses: 0,
    pendingGrading: 0,
    averageCompletion: 0,
    recentActivity: []
  };

  aboutToAppear() {
    this.initializeData();
  }

  initializeData() {
    // åˆå§‹åŒ–è¯¾ç¨‹æ•°æ®
    this.courses = [
      {
        id: '1',
        name: 'é«˜ç­‰æ•°å­¦',
        teacher: 'å¼ æ•™æˆ',
        credit: 4,
        category: 'ä¸“ä¸šè¯¾',
        description: 'é«˜ç­‰æ•°å­¦åŸºç¡€è¯¾ç¨‹',
        createTime: '2024-01-15',
        studentCount: 45,
        status: 'è¿›è¡Œä¸­'
      },
      {
        id: '2',
        name: 'çº¿æ€§ä»£æ•°',
        teacher: 'ææ•™æˆ',
        credit: 3,
        category: 'ä¸“ä¸šè¯¾',
        description: 'çº¿æ€§ä»£æ•°åŸºç¡€ç†è®º',
        createTime: '2024-01-20',
        studentCount: 38,
        status: 'è¿›è¡Œä¸­'
      }
    ];

    // åˆå§‹åŒ–å­¦ç”Ÿæ•°æ®
    this.students = [
      {
        id: '1',
        name: 'å¼ ä¸‰',
        studentId: '2024001',
        email: 'zhangsan@example.com',
        phone: '13800138001',
        enrolledCourses: ['1', '2'],
        totalScore: 92,
        completionRate: 95,
        lastActive: '2024-01-25 14:30'
      },
      {
        id: '2',
        name: 'æå››',
        studentId: '2024002',
        email: 'lisi@example.com',
        phone: '13800138002',
        enrolledCourses: ['1'],
        totalScore: 85,
        completionRate: 88,
        lastActive: '2024-01-25 10:15'
      },
      {
        id: '3',
        name: 'ç‹äº”',
        studentId: '2024003',
        email: 'wangwu@example.com',
        phone: '13800138003',
        enrolledCourses: ['1', '2'],
        totalScore: 78,
        completionRate: 82,
        lastActive: '2024-01-24 16:45'
      },
      {
        id: '4',
        name: 'èµµå…­',
        studentId: '2024004',
        email: 'zhaoliu@example.com',
        phone: '13800138004',
        enrolledCourses: ['2'],
        totalScore: 88,
        completionRate: 90,
        lastActive: '2024-01-24 09:20'
      }
    ];

    // åˆå§‹åŒ–ä½œä¸šæ•°æ®
    this.assignments = [
      {
        id: '1',
        title: 'å¾®ç§¯åˆ†ç»ƒä¹ é¢˜',
        courseId: '1',
        type: 'ä½œä¸š',
        description: 'ç¬¬ä¸€ç« å¾®ç§¯åˆ†åŸºç¡€ç»ƒä¹ ',
        deadline: '2024-02-01',
        totalPoints: 100,
        submissionCount: 35,
        averageScore: 82,
        status: 'è¿›è¡Œä¸­'
      }
    ];

    // åˆå§‹åŒ–é¢˜åº“æ•°æ®
    this.questionBank = [
      {
        id: '1',
        subject: 'é«˜ç­‰æ•°å­¦',
        difficulty: 'ä¸­ç­‰',
        type: 'é€‰æ‹©é¢˜',
        question: 'æ±‚å‡½æ•°f(x)=xÂ²çš„å¯¼æ•°',
        options: ['2x', 'xÂ²', '2', 'x'],
        correctAnswer: '2x',
        knowledgePoints: ['å¯¼æ•°', 'åŸºæœ¬å‡½æ•°'],
        usageCount: 15,
        successRate: 85
      }
    ];

    // åˆå§‹åŒ–åˆ†ææ•°æ®
    this.analytics = {
      totalStudents: this.students.length,
      activeCourses: this.courses.length,
      pendingGrading: 5,
      averageCompletion: 85,
      recentActivity: [
        {
          id: '1',
          type: 'æäº¤ä½œä¸š',
          studentName: 'ç‹å°æ˜',
          description: 'æäº¤äº†å¾®ç§¯åˆ†ç»ƒä¹ é¢˜',
          timestamp: '2024-01-25 14:30'
        }
      ]
    };
  }

  @Builder
  buildQuickStatsCards() {
    Row({ space: 12 }) {
      // å­¦ç”Ÿæ€»æ•°å¡ç‰‡
      Column({ space: 8 }) {
        Text('ğŸ‘¥')
          .fontSize(24);
        Text(`${this.students.length}`)
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor('#1e293b');
        Text('å­¦ç”Ÿæ€»æ•°')
          .fontSize(12)
          .fontColor('#64748b');
      }
      .width('0')
      .layoutWeight(1)
      .height(80)
      .justifyContent(FlexAlign.Center)
      .backgroundColor('#ffffff')
      .borderRadius(16)
      .backdropBlur(10)
      .border({ width: 1, color: '#e5e7eb' });

      // è¯¾ç¨‹æ€»æ•°å¡ç‰‡
      Column({ space: 8 }) {
        Text('ğŸ“š')
          .fontSize(24);
        Text(`${this.courses.length}`)
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor('#1e293b');
        Text('è¯¾ç¨‹æ€»æ•°')
          .fontSize(12)
          .fontColor('#64748b');
      }
      .width('0')
      .layoutWeight(1)
      .height(80)
      .justifyContent(FlexAlign.Center)
      .backgroundColor('#ffffff')
      .borderRadius(16)
      .backdropBlur(10)
      .border({ width: 1, color: '#e5e7eb' });

      // ä½œä¸šæ€»æ•°å¡ç‰‡
      Column({ space: 8 }) {
        Text('ğŸ“')
          .fontSize(24);
        Text(`${this.assignments.length}`)
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor('#1e293b');
        Text('ä½œä¸šæ€»æ•°')
          .fontSize(12)
          .fontColor('#64748b');
      }
      .width('0')
      .layoutWeight(1)
      .height(80)
      .justifyContent(FlexAlign.Center)
      .backgroundColor('#ffffff')
      .borderRadius(16)
      .backdropBlur(10)
      .border({ width: 1, color: '#e5e7eb' });
    }
  }

  @Builder
  buildFunctionCards() {
    Column({ space: 16 }) {
      // ç¬¬ä¸€è¡ŒåŠŸèƒ½å¡ç‰‡
      Row({ space: 12 }) {
        // è¯¾ç¨‹ç®¡ç†å¡ç‰‡
        Column({ space: 12 }) {
          Text('ğŸ“š')
            .fontSize(32);
          Text('è¯¾ç¨‹ç®¡ç†')
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .fontColor('#1e293b');
          Text('ç®¡ç†è¯¾ç¨‹ä¿¡æ¯\næŸ¥çœ‹è¯¾ç¨‹è¯¦æƒ…')
            .fontSize(12)
            .fontColor('#64748b')
            .textAlign(TextAlign.Center)
            .lineHeight(16);
        }
        .width('0')
        .layoutWeight(1)
        .height(120)
        .justifyContent(FlexAlign.Center)
        .backgroundColor('#ffffff')
        .borderRadius(20)
        .shadow({ radius: 8, color: '#00000015', offsetY: 4 })
        .onClick(() => {
          this.currentTab = 1;
        });

        // å­¦ç”Ÿç®¡ç†å¡ç‰‡
        Column({ space: 12 }) {
          Text('ğŸ‘¥')
            .fontSize(32);
          Text('å­¦ç”Ÿç®¡ç†')
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .fontColor('#1e293b');
          Text('ç®¡ç†å­¦ç”Ÿä¿¡æ¯\næŸ¥çœ‹å­¦ä¹ è¿›åº¦')
            .fontSize(12)
            .fontColor('#64748b')
            .textAlign(TextAlign.Center)
            .lineHeight(16);
        }
        .width('0')
        .layoutWeight(1)
        .height(120)
        .justifyContent(FlexAlign.Center)
        .backgroundColor('#ffffff')
        .borderRadius(20)
        .shadow({ radius: 8, color: '#00000015', offsetY: 4 })
        .onClick(() => {
          console.log('ç‚¹å‡»å­¦ç”Ÿç®¡ç†ï¼Œåˆ‡æ¢åˆ°tab 2');
          this.currentTab = 2;
          console.log('å½“å‰tab:', this.currentTab);
        });
      }

      // ç¬¬äºŒè¡ŒåŠŸèƒ½å¡ç‰‡
      Row({ space: 12 }) {
        // ä½œä¸šç®¡ç†å¡ç‰‡
        Column({ space: 12 }) {
          Text('ğŸ“')
            .fontSize(32);
          Text('ä½œä¸šç®¡ç†')
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .fontColor('#1e293b');
          Text('å‘å¸ƒä½œä¸š\næ‰¹æ”¹ä½œä¸š')
            .fontSize(12)
            .fontColor('#64748b')
            .textAlign(TextAlign.Center)
            .lineHeight(16);
        }
        .width('0')
        .layoutWeight(1)
        .height(120)
        .justifyContent(FlexAlign.Center)
        .backgroundColor('#ffffff')
        .borderRadius(20)
        .shadow({ radius: 8, color: '#00000015', offsetY: 4 })
        .onClick(() => {
          this.currentTab = 3;
        });

        // é¢˜åº“ç®¡ç†å¡ç‰‡
        Column({ space: 12 }) {
          Text('â“')
            .fontSize(32);
          Text('é¢˜åº“ç®¡ç†')
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .fontColor('#1e293b');
          Text('ç®¡ç†é¢˜ç›®\nç»„ç»‡è¯•å·')
            .fontSize(12)
            .fontColor('#64748b')
            .textAlign(TextAlign.Center)
            .lineHeight(16);
        }
        .width('0')
        .layoutWeight(1)
        .height(120)
        .justifyContent(FlexAlign.Center)
        .backgroundColor('#ffffff')
        .borderRadius(20)
        .shadow({ radius: 8, color: '#00000015', offsetY: 4 })
        .onClick(() => {
          this.currentTab = 4;
        });
      }
    }
  }

  @Builder
  buildRecentActivityCard() {
    Column({ space: 16 }) {
      Row() {
        Text('ğŸ“ˆ æœ€è¿‘æ´»åŠ¨')
          .fontSize(18)
          .fontWeight(FontWeight.Bold)
          .fontColor('#1e293b')
          .layoutWeight(1);
        Text('æŸ¥çœ‹å…¨éƒ¨')
          .fontSize(14)
          .fontColor('#3b82f6')
          .onClick(() => {
            router.pushUrl({ url: 'pages/teacher/components/ActivityLog' });
          });
      }
      .width('100%');

      Column({ space: 12 }) {
        // æ´»åŠ¨é¡¹ç›®
        Row({ space: 12 }) {
          Text('ğŸ“š')
            .fontSize(16);
          Column({ space: 4 }) {
            Text('æ–°å¢è¯¾ç¨‹ã€Šé«˜ç­‰æ•°å­¦ã€‹')
              .fontSize(14)
              .fontColor('#1e293b');
            Text('2å°æ—¶å‰')
              .fontSize(12)
              .fontColor('#64748b');
          }
          .alignItems(HorizontalAlign.Start)
          .layoutWeight(1);
        }
        .width('100%')
        .padding(12);

        Row({ space: 12 }) {
          Text('ğŸ“')
            .fontSize(16);
          Column({ space: 4 }) {
            Text('å‘å¸ƒä½œä¸šã€Šçº¿æ€§ä»£æ•°ç»ƒä¹ ã€‹')
              .fontSize(14)
              .fontColor('#1e293b');
            Text('5å°æ—¶å‰')
              .fontSize(12)
              .fontColor('#64748b');
          }
          .alignItems(HorizontalAlign.Start)
          .layoutWeight(1);
        }
        .width('100%')
        .padding(12);

        Row({ space: 12 }) {
          Text('ğŸ‘¥')
            .fontSize(16);
          Column({ space: 4 }) {
            Text('æ–°å­¦ç”ŸåŠ å…¥è¯¾ç¨‹')
              .fontSize(14)
              .fontColor('#1e293b');
            Text('1å¤©å‰')
              .fontSize(12)
              .fontColor('#64748b');
          }
          .alignItems(HorizontalAlign.Start)
          .layoutWeight(1);
        }
        .width('100%')
        .padding(12);
      }
    }
    .width('100%')
    .padding(20)
    .backgroundColor('#ffffff')
    .borderRadius(20)
    .shadow({ radius: 8, color: '#00000015', offsetY: 4 });
  }

  @Builder
  buildBottomNavigation() {
    Row({ space: 0 }) {
      // é¦–é¡µ
      Column({ space: 4 }) {
        Text('ğŸ ')
          .fontSize(20);
        Text('é¦–é¡µ')
          .fontSize(12)
          .fontColor('#3b82f6');
      }
      .width('0')
      .layoutWeight(1)
      .height(60)
      .justifyContent(FlexAlign.Center)
      .backgroundColor('#ffffff')
      .onClick(() => {
        this.currentTab = 0;
      });

      // æ•°æ®åˆ†æ
      Column({ space: 4 }) {
        Text('ğŸ“Š')
          .fontSize(20);
        Text('åˆ†æ')
          .fontSize(12)
          .fontColor('#64748b');
      }
      .width('0')
      .layoutWeight(1)
      .height(60)
      .justifyContent(FlexAlign.Center)
      .backgroundColor('#ffffff')
      .onClick(() => {
        this.currentTab = 5;
      });

      // æ¶ˆæ¯ä¸­å¿ƒ
      Column({ space: 4 }) {
        Text('ğŸ’¬')
          .fontSize(20);
        Text('æ¶ˆæ¯')
          .fontSize(12)
          .fontColor('#64748b');
      }
      .width('0')
      .layoutWeight(1)
      .height(60)
      .justifyContent(FlexAlign.Center)
      .backgroundColor('#ffffff')
      .onClick(() => {
        this.currentTab = 6;
      });

      // è®¾ç½®
      Column({ space: 4 }) {
        Text('âš™ï¸')
          .fontSize(20);
        Text('è®¾ç½®')
          .fontSize(12)
          .fontColor('#64748b');
      }
      .width('0')
      .layoutWeight(1)
      .height(60)
      .justifyContent(FlexAlign.Center)
      .backgroundColor('#ffffff')
      .onClick(() => {
        this.currentTab = 7;
      });
    }
    .width('100%')
    .shadow({ radius: 8, color: '#00000015', offsetY: -4 });
  }

  @Builder
  TabBuilder(title: string, icon: string, index: number) {
    Column({ space: 6 }) {
      Text(icon)
        .fontSize(22)
        .animation({
          duration: 200,
          curve: Curve.EaseInOut
        });
      Text(title)
        .fontSize(13)
        .fontWeight(this.currentTab === index ? FontWeight.Bold : FontWeight.Medium)
        .fontColor(this.currentTab === index ? '#3b82f6' : '#64748b')
        .animation({
          duration: 200,
          curve: Curve.EaseInOut
        });
    }
    .width('100%')
    .height(60)
    .justifyContent(FlexAlign.Center)
    .backgroundColor(this.currentTab === index ?
      'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)' : Color.Transparent)
    .borderRadius(12)
    .shadow(this.currentTab === index ? {
      radius: 8,
      color: '#3b82f640',
      offsetX: 0,
      offsetY: 4
    } : {
      radius: 0,
      color: Color.Transparent,
      offsetX: 0,
      offsetY: 0
    })
    .scale(this.currentTab === index ? { x: 1.05, y: 1.05 } : { x: 1, y: 1 })
    .animation({
      duration: 300,
      curve: Curve.EaseInOut
    })
    .onClick(() => {
      this.currentTab = index;
    })
  }

  build() {
    Stack() {
      // èƒŒæ™¯æ¸å˜
      Column()
        .width('100%')
        .height('100%')
        .linearGradient({
          angle: 135,
          colors: [['#3b82f6', 0.0], ['#1e40af', 0.3], ['#1d4ed8', 0.6], ['#2563eb', 1.0]]
        });

      Column() {
        // é¡¶éƒ¨å¯¼èˆªæ 
        Row() {
          Column({ space: 4 }) {
            Text('ğŸ“ æ•™å¸ˆç®¡ç†å¹³å°')
              .fontSize(26)
              .fontWeight(FontWeight.Bold)
              .fontColor('#ffffff')
              .textShadow({ radius: 2, color: '#00000030', offsetX: 1, offsetY: 1 });
            Text('æ™ºèƒ½æ•™å­¦ç®¡ç†ç³»ç»Ÿ')
              .fontSize(14)
              .fontColor('#ffffff90')
              .opacity(0.9);
          }
          .alignItems(HorizontalAlign.Start)
          .layoutWeight(1);

          Row({ space: 16 }) {
            Button() {
              Row({ space: 6 }) {
                Text('â†')
                  .fontSize(18)
                  .fontColor('#ffffff');
                Text('è¿”å›')
                  .fontSize(12)
                  .fontColor('#ffffff');
              }
            }
            .backgroundColor('#8b5cf6')
            .borderRadius(25)
            .padding({ left: 12, right: 12, top: 8, bottom: 8 })
            .backdropBlur(10)
            .border({ width: 1, color: '#a855f7' })
            .onClick(() => {
              // è¿”å›ä¸Šä¸€é¡µ
              router.back();
            });

            Button() {
              Row({ space: 6 }) {
                Text('âœ•')
                  .fontSize(18)
                  .fontColor('#ffffff');
                Text('é€€å‡º')
                  .fontSize(12)
                  .fontColor('#ffffff');
              }
            }
            .backgroundColor('#8b5cf6')
            .borderRadius(25)
            .padding({ left: 12, right: 12, top: 8, bottom: 8 })
            .backdropBlur(10)
            .border({ width: 1, color: '#a855f7' })
            .onClick(() => {
              // é€€å‡ºåº”ç”¨æˆ–è¿”å›é¦–é¡µ
              router.replaceUrl({ url: 'pages/Index' });
            });
          }
        }
        .width('100%')
        .padding({ left: 20, right: 20, top: 20, bottom: 16 });

        // ä¸»è¦å†…å®¹åŒºåŸŸ
        if (this.currentTab === 0) {
          // åŠŸèƒ½å¡ç‰‡ç½‘æ ¼
          Column({ space: 20 }) {
            // å¿«é€Ÿç»Ÿè®¡å¡ç‰‡
            this.buildQuickStatsCards();

            // åŠŸèƒ½å¯¼èˆªå¡ç‰‡
            this.buildFunctionCards();

            // æœ€è¿‘æ´»åŠ¨å¡ç‰‡
            this.buildRecentActivityCard();
          }
          .padding({ left: 20, right: 20, top: 20, bottom: 20 })
          .layoutWeight(1);
        } else if (this.currentTab === 1) {
          CourseManagement({ courses: $courses })
            .padding(20)
            .layoutWeight(1)
            .backgroundColor('#f8fafc');
        } else if (this.currentTab === 2) {
          // å­¦ç”Ÿç®¡ç†é¡µé¢
          Column() {
            // å›ºå®šé¡¶éƒ¨æ ‡é¢˜æ 
            Row() {
              Column({ space: 4 }) {
                Text('ğŸ‘¥ å­¦ç”Ÿç®¡ç†')
                  .fontSize(24)
                  .fontWeight(FontWeight.Bold)
                  .fontColor('#1e293b');
                Text(`å½“å‰æœ‰ ${this.students.length} åå­¦ç”Ÿ`)
                  .fontSize(16)
                  .fontColor('#64748b');
              }
              .alignItems(HorizontalAlign.Start)
              .layoutWeight(1);

              // æ·»åŠ å­¦ç”ŸæŒ‰é’®
              Button() {
                Row({ space: 8 }) {
                  Text('+')
                    .fontSize(16)
                    .fontColor('#ffffff')
                    .fontWeight(FontWeight.Bold);
                  Text('æ·»åŠ å­¦ç”Ÿ')
                    .fontSize(14)
                    .fontColor('#ffffff')
                    .fontWeight(FontWeight.Medium);
                }
              }
              .backgroundColor('#3b82f6')
              .borderRadius(10)
              .padding({ left: 14, right: 14, top: 8, bottom: 8 })
              .shadow({ radius: 6, color: '#3b82f640', offsetY: 3 })
              .onClick(() => {
                console.log('æ·»åŠ æ–°å­¦ç”Ÿ');
              });
            }
            .width('100%')
            .padding({ left: 20, right: 20, top: 20, bottom: 16 })
            .backgroundColor('#ffffff')
            .shadow({ radius: 4, color: '#00000010', offsetY: 2 });

            // å¯æ»šåŠ¨çš„å­¦ç”Ÿåˆ—è¡¨åŒºåŸŸ
            Scroll() {
              Column({ space: 16 }) {
                ForEach(this.students, (student: Student) => {
                  Column({ space: 12 }) {
                    // å­¦ç”ŸåŸºæœ¬ä¿¡æ¯è¡Œ
                    Row({ space: 12 }) {
                      // å­¦ç”Ÿå¤´åƒ
                      Column() {
                        Text('ğŸ‘¤')
                          .fontSize(20)
                          .fontColor('#3b82f6');
                      }
                      .width(44)
                      .height(44)
                      .justifyContent(FlexAlign.Center)
                      .backgroundColor('#f0f9ff')
                      .borderRadius(22)
                      .border({ width: 1.5, color: '#bfdbfe' });

                      // å­¦ç”ŸåŸºæœ¬ä¿¡æ¯
                      Column({ space: 4 }) {
                        Row({ space: 8 }) {
                          Text(student.name)
                            .fontSize(16)
                            .fontWeight(FontWeight.Bold)
                            .fontColor('#1e293b');
                          Text(student.studentId)
                            .fontSize(12)
                            .fontColor('#64748b')
                            .backgroundColor('#f1f5f9')
                            .padding({ left: 6, right: 6, top: 2, bottom: 2 })
                            .borderRadius(4);
                        }
                        .alignItems(VerticalAlign.Center);

                        Text(`ğŸ“§ ${student.email}`)
                          .fontSize(12)
                          .fontColor('#64748b')
                          .maxLines(1)
                          .textOverflow({ overflow: TextOverflow.Ellipsis });
                      }
                      .alignItems(HorizontalAlign.Start)
                      .layoutWeight(1);

                      // æ“ä½œæŒ‰é’®ç»„
                      Row({ space: 6 }) {
                        Button() {
                          Text('è¯¦æƒ…')
                            .fontSize(12)
                            .fontColor('#ffffff');
                        }
                        .backgroundColor('#10b981')
                        .borderRadius(6)
                        .padding({ left: 10, right: 10, top: 4, bottom: 4 })
                        .onClick(() => {
                          console.log(`æŸ¥çœ‹å­¦ç”Ÿè¯¦æƒ…: ${student.name}`);
                        });

                        Button() {
                          Text('ç¼–è¾‘')
                            .fontSize(12)
                            .fontColor('#ffffff');
                        }
                        .backgroundColor('#f59e0b')
                        .borderRadius(6)
                        .padding({ left: 10, right: 10, top: 4, bottom: 4 })
                        .onClick(() => {
                          console.log(`ç¼–è¾‘å­¦ç”Ÿä¿¡æ¯: ${student.name}`);
                        });
                      }
                    }
                    .width('100%')
                    .alignItems(VerticalAlign.Center);

                    // å­¦ç”Ÿè¯¦ç»†ä¿¡æ¯è¡Œ
                    Row({ space: 16 }) {
                      Column({ space: 2 }) {
                        Text('ğŸ“± è”ç³»æ–¹å¼')
                          .fontSize(10)
                          .fontColor('#94a3b8');
                        Text(student.phone)
                          .fontSize(12)
                          .fontColor('#64748b');
                      }
                      .alignItems(HorizontalAlign.Start)
                      .layoutWeight(1);

                      Column({ space: 2 }) {
                        Text('ğŸ“Š æ€»åˆ†')
                          .fontSize(10)
                          .fontColor('#94a3b8');
                        Text(`${student.totalScore}`)
                          .fontSize(12)
                          .fontColor('#059669')
                          .fontWeight(FontWeight.Medium);
                      }
                      .alignItems(HorizontalAlign.Start)
                      .layoutWeight(1);

                      Column({ space: 2 }) {
                        Text('âœ… å®Œæˆç‡')
                          .fontSize(10)
                          .fontColor('#94a3b8');
                        Text(`${student.completionRate}%`)
                          .fontSize(12)
                          .fontColor('#dc2626')
                          .fontWeight(FontWeight.Medium);
                      }
                      .alignItems(HorizontalAlign.Start)
                      .layoutWeight(1);

                      Column({ space: 2 }) {
                        Text('ğŸ•’ æœ€åæ´»è·ƒ')
                          .fontSize(10)
                          .fontColor('#94a3b8');
                        Text(student.lastActive.split(' ')[0])
                          .fontSize(12)
                          .fontColor('#64748b');
                      }
                      .alignItems(HorizontalAlign.Start)
                      .layoutWeight(1);
                    }
                    .width('100%');
                  }
                  .width('100%')
                  .padding(16)
                  .backgroundColor('#ffffff')
                  .borderRadius(12)
                  .shadow({ radius: 4, color: '#00000008', offsetY: 2 })
                  .border({ width: 1, color: '#f1f5f9' });
                });
              }
              .width('100%')
              .padding({ left: 20, right: 20, top: 16, bottom: 20 });
            }
            .layoutWeight(1)
            .scrollable(ScrollDirection.Vertical)
            .scrollBar(BarState.Auto)
            .edgeEffect(EdgeEffect.Spring);
          }
          .width('100%')
          .height('100%')
          .backgroundColor('#f8fafc');
        } else if (this.currentTab === 3) {
          AssignmentManagement({ assignments: $assignments, courses: $courses })
            .padding(20)
            .layoutWeight(1)
            .backgroundColor('#f8fafc');
        } else if (this.currentTab === 4) {
          QuestionBankManagement({ questionBank: $questionBank })
            .padding(20)
            .layoutWeight(1)
            .backgroundColor('#f8fafc');
        } else if (this.currentTab === 5) {
          AnalyticsOverview({ analytics: $analytics })
            .padding(20)
            .layoutWeight(1)
            .backgroundColor('#f8fafc');
        } else if (this.currentTab === 6) {
          // æ¶ˆæ¯ä¸­å¿ƒé¡µé¢
          Column({ space: 20 }) {
            Text('ğŸ’¬ æ¶ˆæ¯ä¸­å¿ƒ')
              .fontSize(24)
              .fontWeight(FontWeight.Bold)
              .fontColor('#1e293b');
            Text('æš‚æ— æ–°æ¶ˆæ¯')
              .fontSize(16)
              .fontColor('#64748b');
          }
          .padding(20)
          .layoutWeight(1)
          .backgroundColor('#f8fafc')
          .justifyContent(FlexAlign.Center);
        } else if (this.currentTab === 7) {
          // è®¾ç½®é¡µé¢
          Column({ space: 20 }) {
            Text('âš™ï¸ ç³»ç»Ÿè®¾ç½®')
              .fontSize(24)
              .fontWeight(FontWeight.Bold)
              .fontColor('#1e293b');
            Text('è®¾ç½®åŠŸèƒ½å¼€å‘ä¸­...')
              .fontSize(16)
              .fontColor('#64748b');
          }
          .padding(20)
          .layoutWeight(1)
          .backgroundColor('#f8fafc')
          .justifyContent(FlexAlign.Center);
        }

        // åº•éƒ¨å¯¼èˆªæ å·²ç§»é™¤
      }
      .width('100%')
      .height('100%')

      // AIåŠ©æ‰‹ç»„ä»¶å·²ç§»é™¤
    }
    .width('100%')
    .height('100%')
  }
}